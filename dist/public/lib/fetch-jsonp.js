!function(e,t){if("function"==typeof define&&define.amd)define(["exports","module"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module);else{var n={exports:{}};t(n.exports,n),e.fetchJsonp=n.exports}}(this,(function(e,t){"use strict";var n=5e3,o="callback";function r(){return"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random())}function i(e){try{delete window[e]}catch(t){window[e]=void 0}}function u(e){var t=document.getElementById(e);t&&document.getElementsByTagName("head")[0].removeChild(t)}t.exports=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],c=e,d=t.timeout||n,a=t.jsonpCallback||o,s=void 0;return new Promise((function(n,o){var f=t.jsonpCallbackFunction||r(),l=a+"_"+f;window[f]=function(e){n({ok:!0,json:function(){return Promise.resolve(e)}}),s&&clearTimeout(s),u(l),i(f)},c+=-1===c.indexOf("?")?"?":"&";var m=document.createElement("script");m.setAttribute("src",""+c+a+"="+f),t.charset&&m.setAttribute("charset",t.charset),m.id=l,document.getElementsByTagName("head")[0].appendChild(m),s=setTimeout((function(){o(new Error("JSONP request to "+e+" timed out")),i(f),u(l),window[f]=function(){i(f)}}),d),m.onerror=function(){o(new Error("JSONP request to "+e+" failed")),i(f),u(l),s&&clearTimeout(s)}}))}}));