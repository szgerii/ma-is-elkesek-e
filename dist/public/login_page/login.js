const e="/api/login";function t(){const e=document.querySelector("#input-username"),t=document.querySelector("#input-password"),o=document.querySelector("#input-submitBtn");let l=passwordCorrect=!1;e.addEventListener("keyup",e=>{13==e.keyCode&&r()}),t.addEventListener("keyup",e=>{13==e.keyCode&&r()}),e.addEventListener("input",e=>{l="correct"===n(e.target.value),o.disabled=!(l&&passwordCorrect)}),t.addEventListener("input",e=>{passwordCorrect="correct"===s(e.target.value),o.disabled=!(l&&passwordCorrect)}),document.querySelector("#button-wrapper").addEventListener("click",r)}function r(){const t=document.querySelector("#input-username"),r=document.querySelector("#input-password"),o=document.querySelector("#input-submitBtn"),l=document.querySelector("#username-error"),a=document.querySelector("#password-error");let d=!1;switch(l.innerText="",a.innerText="",t.style.border="",r.style.border="",n(t.value)){case"empty":l.innerText="Kérjük adjon meg egy felhasználónevet",t.style.border=".07em solid rgb(255, 78, 78)",d=!0;break;case"short":l.innerText="A felhasználónévnek legalább 3 karakterből kell állnia",t.style.border=".07em solid rgb(255, 78, 78)",d=!0;break;case"long":l.innerText="A felhasználónév legfeljebb 16 karakterből állhat",t.style.border=".07em solid rgb(255, 78, 78)",d=!0;break;case"incorrect":l.innerText="A felhasználónév csak az angol ABC betűit, számokat, kötőjelet és aláhúzást tartalmazhat",t.style.border=".07em solid rgb(255, 78, 78)",d=!0}switch(s(r.value)){case"empty":a.innerText="Kérjük adjon meg egy jelszót",r.style.border=".07em solid rgb(255, 78, 78)",d=!0;break;case"short":a.innerText="A jelszónak legalább 6 karakterből kell állnia",r.style.border=".07em solid rgb(255, 78, 78)",d=!0}d||(o.value="Kérjük várjon...",o.disabled=!0,fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t.value,password:r.value})}).then(async e=>({json:await e.json(),status:e.status})).then(e=>{o.value="Bejelentkezés",o.disabled=!1,"success"===e.json.status?window.location.assign("/"):"fail"===e.json.status?401===e.status?e.json.data.username?(l.innerText="A megadott felhasználónévvel nem található fiók",t.style.border=".07em solid rgb(255, 78, 78)"):e.json.data.password?(a.innerText="A megadott jelszó helytelen",r.style.border=".07em solid rgb(255, 78, 78)"):(l.innerText="A bejelentkezési adatok helytelenek",a.innerText="A bejelentkezési adatok helytelenek",t.style.border=".07em solid rgb(255, 78, 78)",r.style.border=".07em solid rgb(255, 78, 78)"):422===e.status&&(e.json.data.username?(l.innerText="A megadott felhasználónév formátuma nem megfelelő",t.style.border=".07em solid rgb(255, 78, 78)"):e.json.data.password?(a.innerText="A megadott jelszó formátuma nem megfelelő",r.style.border=".07em solid rgb(255, 78, 78)"):(l.innerText="A bejelentkezési adatok formátuma nem megfelelő",a.innerText="A bejelentkezési adatok formátuma nem megfelelő",t.style.border=".07em solid rgb(255, 78, 78)",r.style.border=".07em solid rgb(255, 78, 78)")):a.innerText="Ismeretlen hiba történt a bejelentkezés során, kérjük probálkozzon újra később."}).catch(e=>{o.value="Bejelentkezés",o.disabled=!1,console.debug(e),a.innerText="Ismeretlen hiba történt a bejelentkezés során, kérjük probálkozzon újra később."}))}function n(e){return""==e?"empty":e.length<3?"short":e.length>16?"long":/^([a-zA-Z0-9_-]){3,16}$/.test(e)?"correct":"incorrect"}function s(e){return""==e?"empty":e.length<6?"short":"correct"}window.addEventListener?window.addEventListener("load",t):window.attachEvent&&window.attachEvent("onload",t);